<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Techstructive Blog | SQLite importing CSV with custom separator</title>
    <style>
            :root {
                --bg-color: #ffffff;
                --text-color: #333333;
                --secondary-text-color: ;
                --link-normal: #007bff;
                --link-hover: #0056b3;
                --link-active: #003a75;
                --quote-color: #999999;
                --code-bg-color: #dddddd;
                --code-border-color: #ced4da;
                --code-text-color: #444444;
                --code-comment-color: #808080;
                --code-keyword-color: #008000;
                --code-string-color: #000080;
                --code-number-color: #000000;
                --code-variable-color: #000000;
                --code-function-color: #000000;
            }

             
            .secondary-theme {
                --bg-color: #121212;
                --text-color: #ffffff;
                --secondary-text-color: #ff6600;
                --link-normal: #ff6600;
                --link-hover: #4682b4;
                --link-active: #00008b;
                --quote-color: #a9a9a9;
                --code-bg-color: #333333;
                --code-border-color: #444444;
                --code-text-color: #ffffff;
                --code-comment-color: #b0b0b0;
                --code-keyword-color: #32cd32;
                --code-string-color: #ff6347;
                --code-number-color: #d3d3d3;
                --code-variable-color: #b0e0e6;
                --code-function-color: #ff4500;
            }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 2rem;
            padding-bottom: 1rem;
        }

        h1, h2, h3, h4, h5, h6 {
            color: var(--secondary-text-color);
        }

        .Site-title {
            font-size: 1.8rem;
            margin: 0;
        }

        .Site-title a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .Site-title a:hover {
            color: var(--hover-color);
        }

        .Post-meta {
            color: var(--secondary-text);
            font-size: 0.9rem;
            margin: 1rem 0;
        }

        article {
            margin: 2rem 0;
        }

        pre {
            background-color: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 1rem;
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        code {
            font-family: 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
            font-size: 0.9em;
        }

        p code {
            background-color: var(--inline-code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        blockquote {
            border-left: 3px solid var(--accent-color);
            margin: 1.5rem 0;
            padding-left: 1rem;
            color: var(--secondary-text);
        }

        a {
            color: var(--link-normal);
            text-decoration: none;
            transition: color 0.2s ease;
        }

        a:hover {
            color: var(--hover-color);
        }

        .Hljs-comment { color: var(--code-comment); } 
        .Hljs-keyword { color: var(--code-keyword); }
        .Hljs-string { color: var(--code-string); }
        .Hljs-number { color: var(--code-number); }
        .Hljs-function { color: var(--code-function); }
        .Hljs-variable { color: var(--code-variable); }

        button, .Button {
            background-color: var(--accent-color);
            border: none;
            border-radius: 6px;
            color: var(--bg-color);
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            transition: background-color 0.2s ease;
        }

        button:hover, .Button:hover {
            background-color: var(--hover-color);
        }


         
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            pre {
                margin: 1rem -1rem;
                border-radius: 0;
            }
        }
        #theme-toggle {
            background-color: var(--link-normal);
            border: none;
            border-radius: 6px;
            color: var(--bg-color);
            cursor: pointer;
            font-family: inherit;
            font-size: 1rem;
            padding: 0.5rem 1.5rem;
            transition: background-color 0.2s ease;
        }

        #theme-toggle:hover {
            background-color: var(--link-hover);
        }

        code {
          font-family: monospace;
          padding: 2px 4px;
          border-radius: 4px;
        }

pre {
    background-color: var(--code-bg-color, #f5f5f5);
    border: 1px solid var(--code-border-color, #d1d1d1);
    border-radius: 6px;
    padding: 1rem;
    overflow-x: auto;
    margin: 1.5rem 0;
}

code {
    font-family: 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    font-size: 0.9em;
    color: var(--code-text-color, #fff);
}

p code {
    color: var(--code-text-color, #000);
    background-color: var(--code-bg-color, #444444);
    padding: 0.2em 0.4em;
    border-radius: 3px;
}

 
.Hljs-comment { color: var(--code-comment-color, #7d7d7d); }
.Hljs-keyword { color: var(--code-keyword-color, #005cc5); }
.Hljs-string { color: var(--code-string-color, #d73a49); }
.Hljs-number { color: var(--code-number-color, #e36209); }
.Hljs-variable { color: var(--code-variable-color, #6f42c1); }
.Hljs-function { color: var(--code-function-color, #005cc5); }

 
.secondary-theme pre {
    background-color: var(--code-bg-color, #1e1e1e);
    border: 1px solid var(--code-border-color, #3c3c3c);
}

.secondary-theme .Hljs-comment { color: var(--code-comment-color, #6a737d); }
.secondary-theme .Hljs-keyword { color: var(--code-keyword-color, #569cd6); }
.secondary-theme .Hljs-string { color: var(--code-string-color, #ce9178); }
.secondary-theme .Hljs-number { color: var(--code-number-color, #b5cea8); }
.secondary-theme .Hljs-variable { color: var(--code-variable-color, #9cdcfe); }
.secondary-theme .Hljs-function { color: var(--code-function-color, #dcdcaa); }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;

            const currentTheme = localStorage.getItem('theme') || 'light';

            if (currentTheme === 'secondary') {
                body.classList.add('secondary-theme');
            }

            themeToggle.addEventListener('click', () => {
                if (body.classList.contains('secondary-theme')) {
                    body.classList.remove('secondary-theme');
                    localStorage.setItem('theme', 'light');
                } else {
                    body.classList.add('secondary-theme');
                    localStorage.setItem('theme', 'secondary');
                }
            });
        });

        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll("pre").forEach((pre) => {
                const button = document.createElement("button");
                button.classList.add("copy-btn");
                button.textContent = "Copy";
                
                button.addEventListener("click", () => {
                    const code = pre.querySelector("code");
                    if (!code) return;

                    const textToCopy = code.innerText || code.textContent;
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        button.textContent = "Copied!";
                        button.classList.add("copied");

                        setTimeout(() => {
                            button.textContent = "Copy";
                            button.classList.remove("copied");
                        }, 1500);
                    });
                });

                pre.appendChild(button);
            });
        });
    </script>
</head>
<body>
    <header>
        <h1 class="site-title"><a href="/">Techstructive Blog</a></h1>
        <button id="theme-toggle" aria-label="Theme">Theme</button>
    </header>

    <main class="container">
        <article class="blog-post">
            <h1>SQLite importing CSV with custom separator</h1>
            <div class="post-meta">
                Published on üìÖ <time datetime="2024-03-15">2024-03-15</time>
            </div>
            <div class="post-meta">
                Type: <a href="/til">til</a>
            </div>
            <div class="post-meta">
                <span class="post-series-label"> üè∑Ô∏è Tags:</span>
                
                <a href="/tags/sqlite">#sqlite</a>
                
            </div>
            
            <hr>
            <div class="post-content">
                <p>explaination about how i learned how to write a command for importing a csv
into a sqlite3 db with cusotm Separator with a single command inline</p>
<h2>Introduction</h2>
<p>I was exploring some Issues that I can solve given the context of the problem and the intution for the solution.</p>
<p>I have some github repositories that I always look for to learn more. Some of them are:</p>
<ul>
<li><a href="https://github.com/turbot/steampipe">Steampipe</a></li>
<li><a href="https://github.com/mindsdb/mindsdb">MindsDB</a></li>
<li><a href="https://github.com/tursodatabase">Turso</a></li>
</ul>
<p>So, navigating around for a few minutes, I landed on this <a href="https://github.com/tursodatabase/turso-cli/issues/811">issue</a>.</p>
<p>The issue is really well explained in terms of what the feature is to be added, how the usage should be, which for a contributor is half the job done.</p>
<h2>What?</h2>
<p>The <a href="https://github.com/tursodatabase/turso-cli">turso-cli</a> is a CLI for <a href="https://github.com/tursodatabase/turso">Turso</a> that is used to manage libsql databases with the <a href="https://turso.tech">turso</a> platform.</p>
<p>This issue is about adding a flag to the <code>db create</code> command to allow the user to pass in a custom separator while imporing a csv file into a sqlite3 database.</p>
<p>The only puzzle piece left is to answer the question <code>how</code>?</p>
<h2>How?</h2>
<p>So, I went in to the Codebase and found where the <code>db create</code> command has been handled and landed on this <a href="https://sourcegraph.com/github.com/tursodatabase/turso-cli/-/blob/internal/cmd/db_create.go">file</a></p>
<p>While controbuting to open source, I try to do the small steps and solve try to maintain the excitment with that progress. Because if you cannot find the solution, you try to procastinate and in the end nothing gets accomplished. So, breaking down the problem into small chunks is much helpful than solving the entire problem.</p>
<p>In this case, I  tried to add the flag in the cli which is pretty straight forward. We just add one more entry in the list of flags in the <code>db create</code> command. This step is just to add a functional CLI for taking the input of csv-separator string, however, this won't do anything for the functionality part of things, just allow the user to specify the separator/delimitor to use for parsing the CSV file.</p>
<p>Currently, the command that <code>turso db create</code> uses under the hood for creating a db from a csv file is:</p>
<pre><code class="language-bash">sqlite3 &quot;-csv&quot; &quot;dbName&quot; &quot;.import &lt;FileName&gt; &lt;TableName&gt;&quot;
</code></pre>
<p>The above command is found in the <a href="https://sourcegraph.com/github.com/tursodatabase/turso-cli/-/blob/internal/cmd/group_flag.go">group flag</a> file. To parse in the separator, we can use another string as <code>.separator &quot;;&quot;</code>, here the <code>;</code> is the character that should be used as the separator for the csv file into the db.</p>
<pre><code class="language-bash">sqlite3 &quot;-csv&quot; &quot;dbname&quot; &quot;.separator&quot; &quot;;&quot; &quot;.import &lt;FileName&gt; &lt;TableName&gt;&quot;
</code></pre>
<p>Thank you, Happy Coding :)</p>

            </div>
        </article>
    </main>
    
    <footer class="site-footer">
        <div class="container">
            <p>&copy; Techstructive Blog. All rights reserved.</p>
        </div>
    </footer>


    <script>
    </script>
</body>
</html>
